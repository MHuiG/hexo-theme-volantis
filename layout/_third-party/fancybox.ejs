<script src="<%- theme.plugins.fancybox.js %>"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").each(function () {//渲染fancy box
      var element = document.createElement("a");
      $(element).attr("pjax-fancybox", "");
      $(element).attr("href", $(this).attr("data-original"));
      $(element).attr("style", "display:block;text-align: center;");

      $(element).attr("data-fancybox", "images");
      if ($(this).attr('alt')) {
        $(element).attr('data-caption', $(this).attr('alt'));
      }
      if ($(this).next().text()) {
        $(element).attr('data-caption', $(this).next().text());
      }

      $(this).wrap(element);
    })

    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };


  $(function () {
    pjax_fancybox();
  });

</script>